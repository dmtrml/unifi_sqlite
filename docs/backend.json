{
  "entities": {
    "Transaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Transaction",
      "type": "object",
      "description": "Represents a financial transaction, either an expense, income or a transfer.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the transaction."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who owns the transaction."
        },
        "accountId": {
            "type": "string",
            "description": "Reference to the Account this transaction belongs to (for expense/income)."
        },
        "fromAccountId": {
            "type": "string",
            "description": "Reference to the source Account for a transfer."
        },
        "toAccountId": {
            "type": "string",
            "description": "Reference to the destination Account for a transfer."
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to the Category this transaction belongs to."
        },
        "date": {
          "type": "string",
          "description": "The date of the transaction.",
          "format": "date-time"
        },
        "amount": {
          "type": "number",
          "description": "The amount of the transaction. Positive for income, negative for expense."
        },
        "description": {
          "type": "string",
          "description": "A description of the transaction."
        },
        "transactionType": {
          "type": "string",
          "description": "The type of transaction (e.g., 'expense', 'income', 'transfer').",
          "enum": ["expense", "income", "transfer"]
        },
        "expenseType": {
            "type": "string",
            "description": "The type of expense (e.g., 'mandatory', 'optional').",
            "enum": ["mandatory", "optional"]
        },
        "incomeType": {
            "type": "string",
            "description": "The type of income (e.g., 'active', 'passive').",
            "enum": ["active", "passive"]
        },
        "recurringTransactionId": {
          "type": "string",
          "description": "Reference to the RecurringTransaction, if this transaction is part of a recurring series."
        }
      },
      "required": [
        "id",
        "userId",
        "date",
        "amount",
        "transactionType"
      ]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category for classifying transactions.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the category."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who created the category."
        },
        "name": {
          "type": "string",
          "description": "The name of the category (e.g., 'Food', 'Rent')."
        },
        "budgetedAmount": {
          "type": "number",
          "description": "The budgeted amount for this category per month."
        },
        "color": {
            "type": "string",
            "description": "The color associated with the category for UI elements."
        },
        "icon": {
            "type": "string",
            "description": "The name of the lucide-react icon for the category."
        },
        "type": {
          "type": "string",
          "description": "The type of category (e.g., 'expense', 'income').",
          "enum": ["expense", "income"]
        }
      },
      "required": [
        "id",
        "userId",
        "name",
        "color",
        "icon",
        "type"
      ]
    },
    "Account": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Account",
      "type": "object",
      "description": "Represents a financial account.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the account."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who owns the account."
        },
        "name": {
          "type": "string",
          "description": "The name of the account (e.g., 'Checking', 'Credit Card')."
        },
        "balance": {
          "type": "number",
          "description": "The current balance of the account."
        },
        "color": {
            "type": "string",
            "description": "The color associated with the account for UI elements."
        },
        "icon": {
            "type": "string",
            "description": "The name of the lucide-react icon for the account."
        },
        "type": {
          "type": "string",
          "description": "The type of account.",
          "enum": ["Cash", "Card", "Bank Account", "Deposit", "Loan"]
        },
        "currency": {
          "type": "string",
          "description": "The currency of the account.",
          "enum": ["USD", "EUR", "JPY", "GBP", "CHF", "CAD", "AUD", "CNY", "INR", "ARS"]
        }
      },
      "required": [
        "id",
        "userId",
        "name",
        "balance",
        "color",
        "icon",
        "type",
        "currency"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "name": {
          "type": "string",
          "description": "The user's display name."
        }
      },
      "required": [
        "id"
      ]
    },
    "RecurringTransaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "RecurringTransaction",
      "type": "object",
      "description": "Represents a recurring transaction template.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the recurring transaction."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who owns the recurring transaction."
        },
        "accountId": {
            "type": "string",
            "description": "Reference to the Account for this recurring transaction."
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to the Category for this recurring transaction."
        },
        "startDate": {
          "type": "string",
          "description": "The start date of the recurring transaction series.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "The end date of the recurring transaction series (optional).",
          "format": "date-time"
        },
        "amount": {
          "type": "number",
          "description": "The amount of the recurring transaction."
        },
        "description": {
          "type": "string",
          "description": "A description of the recurring transaction."
        },
        "frequency": {
          "type": "string",
          "description": "How often the transaction occurs (e.g., 'monthly', 'bi-weekly', 'weekly').",
          "enum": ["weekly", "bi-weekly", "monthly"]
        }
      },
      "required": [
        "id",
        "userId",
        "accountId",
        "categoryId",
        "startDate",
        "amount",
        "frequency"
      ]
    },
    "Budget": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Budget",
      "type": "object",
      "description": "Represents a budget for a specific category.",
      "properties": {
        "id": {
            "type": "string",
            "description": "Unique identifier for the budget."
        },
        "userId": {
            "type": "string",
            "description": "Reference to the User who owns the budget."
        },
        "categoryId": {
            "type": "string",
            "description": "Reference to the Category this budget applies to."
        },
        "amount": {
            "type": "number",
            "description": "The budgeted amount for the category."
        }
      },
      "required": [
        "id",
        "userId",
        "categoryId",
        "amount"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/entities/User"
          },
          "description": "Stores user profiles. The `userId` is the Firebase Authentication UID."
        }
      },
      {
        "path": "/users/{userId}/transactions/{transactionId}",
        "definition": {
          "entityName": "Transaction",
          "schema": {
            "$ref": "#/entities/Transaction"
          },
          "description": "Stores transactions for each user."
        }
      },
      {
        "path": "/users/{userId}/categories/{categoryId}",
        "definition": {
          "entityName": "Category",
          "schema": {
            "$ref": "#/entities/Category"
          },
          "description": "Stores categories for each user."
        }
      },
       {
        "path": "/users/{userId}/budgets/{budgetId}",
        "definition": {
          "entityName": "Budget",
          "schema": {
            "$ref": "#/entities/Budget"
          },
          "description": "Stores budgets for each user."
        }
      },
      {
        "path": "/users/{userId}/recurringTransactions/{recurringTransactionId}",
        "definition": {
          "entityName": "RecurringTransaction",
          "schema": {
            "$ref": "#/entities/RecurringTransaction"
          },
          "description": "Stores recurring transactions for each user."
        }
      },
      {
        "path": "/users/{userId}/accounts/{accountId}",
        "definition": {
          "entityName": "Account",
          "schema": {
            "$ref": "#/entities/Account"
          },
          "description": "Stores financial accounts for each user."
        }
      }
    ]
  }
}
